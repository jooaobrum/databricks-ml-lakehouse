resources:
  jobs:
    olist_ingestion_pipeline_silver:
      name: Olist Ingestion Pipeline - Silver
      max_concurrent_runs: 3
      tasks:
        - task_key: olist__olist_customers
          existing_cluster_id: 0201-105915-sb4m34sp
          spark_python_task:
            python_file: "../src/ingestions/silver/olist/silver_ingestion.py"
            parameters:
              - "--root_path"
              - "${workspace.root_path}"
              - "--env"
              - "${bundle.target}"
              - "--partitions"
              - "dt_ingestion"
              - "--task_key"
              - "{{task.name}}"
          libraries:
            - whl: ../dist/*.whl

        - task_key: olist__olist_geolocation
          existing_cluster_id: 0201-105915-sb4m34sp
          spark_python_task:
            python_file: "../src/ingestions/silver/olist/silver_ingestion.py"
            parameters:
              - "--root_path"
              - "${workspace.root_path}"
              - "--env"
              - "${bundle.target}"
              - "--partitions"
              - "dt_ingestion"
              - "--task_key"
              - "{{task.name}}"
          libraries:
            - whl: ../dist/*.whl

        - task_key: olist__olist_order_items
          existing_cluster_id: 0201-105915-sb4m34sp
          spark_python_task:
            python_file: "../src/ingestions/silver/olist/silver_ingestion.py"
            parameters:
              - "--root_path"
              - "${workspace.root_path}"
              - "--env"
              - "${bundle.target}"
              - "--file_format"
              - "csv"
              - "--delimiter"
              - ","
              - "--header"
              - "true"
              - "--partitions"
              - "dt_ingestion"
              - "--task_key"
              - "{{task.name}}"
          libraries:
            - whl: ../dist/*.whl


        - task_key: olist__olist_order_payments
          existing_cluster_id: 0201-105915-sb4m34sp
          spark_python_task:
            python_file: "../src/ingestions/silver/olist/silver_ingestion.py"
            parameters:
              - "--root_path"
              - "${workspace.root_path}"
              - "--env"
              - "${bundle.target}"
              - "--partitions"
              - "dt_ingestion"
              - "--task_key"
              - "{{task.name}}"
          libraries:
            - whl: ../dist/*.whl

        - task_key: olist__olist_order_reviews
          existing_cluster_id: 0201-105915-sb4m34sp
          spark_python_task:
            python_file: "../src/ingestions/silver/olist/silver_ingestion.py"
            parameters:
              - "--root_path"
              - "${workspace.root_path}"
              - "--env"
              - "${bundle.target}"
              - "--partitions"
              - "dt_ingestion"
              - "--task_key"
              - "{{task.name}}"
          libraries:
            - whl: ../dist/*.whl

        - task_key: olist__olist_orders
          existing_cluster_id: 0201-105915-sb4m34sp
          spark_python_task:
            python_file: "../src/ingestions/silver/olist/silver_ingestion.py"
            parameters:
              - "--root_path"
              - "${workspace.root_path}"
              - "--env"
              - "${bundle.target}"
              - "--file_format"
              - "csv"
              - "--delimiter"
              - ","
              - "--header"
              - "true"
              - "--partitions"
              - "dt_ingestion"
              - "--task_key"
              - "{{task.name}}"
          libraries:
            - whl: ../dist/*.whl

        - task_key: olist__olist_products
          existing_cluster_id: 0201-105915-sb4m34sp
          spark_python_task:
            python_file: "../src/ingestions/silver/olist/silver_ingestion.py"
            parameters:
              - "--root_path"
              - "${workspace.root_path}"
              - "--env"
              - "${bundle.target}"
              - "--partitions"
              - "dt_ingestion"
              - "--task_key"
              - "{{task.name}}"

        - task_key: olist__olist_sellers
          existing_cluster_id: 0201-105915-sb4m34sp
          spark_python_task:
            python_file: "../src/ingestions/silver/olist/silver_ingestion.py"
            parameters:
              - "--root_path"
              - "${workspace.root_path}"
              - "--env"
              - "${bundle.target}"
              - "--partitions"
              - "dt_ingestion"
              - "--task_key"
              - "{{task.name}}"
          libraries:
            - whl: ../dist/*.whl
